<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hand Gesture Game</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ml5/1.0.0/ml5.min.js"></script>
</head>
<body>
    <video id="video" width="640" height="480" autoplay></video>
    <canvas id="canvas" width="640" height="480"></canvas>

    <script>
        let handpose;
        let video;
        let predictions = [];

        function setup() {
            video = document.getElementById('video');
            canvas = document.getElementById('canvas');
            ctx = canvas.getContext('2d');

            handpose = ml5.handpose(video, modelLoaded);
            handpose.on('predict', gotPoses);
        }

        function modelLoaded() {
            console.log('Model Loaded!');
        }

        function gotPoses(results) {
            predictions = results;
        }

        function draw() {
            clear();
            drawKeypoints();
        }

        function drawKeypoints() {
            for (let i = 0; i < predictions.length; i++) {
                let hand = predictions[i];
                for (let j = 0; j < hand.landmarks.length; j++) {
                    let [x, y] = hand.landmarks[j];
                    // Draw keypoints on canvas
                    ctx.fillStyle = '#FF0000';
                    ctx.fillRect(x, y, 10, 10);
                }
            }
        }

        function clear() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        setup();
        setInterval(draw, 10); // Redraw keypoints every 10 milliseconds
    </script>
</body>
</html>
